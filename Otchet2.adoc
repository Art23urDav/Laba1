[.text-center]
Министерство науки и высшего образования Российской Федерации 
Федеральное государственное автономное образовательное учреждение высшего образования «Южно-Уральский государственный университет» (национальный исследовательский университет) 
Высшая школа электроники и компьютерных наук Кафедра «Информационно-измерительная техника»


[.text-center]
Высшая школа электроники и компьютерных наук Кафедра «Информационно-измерительная техника»

[.text-center]
дисциплина: 1.Ф.П1.06 (Программное обеспечение измерительных процессов)

[.text-center]
Отчет по лабороторной работе №1 +
на тему "Запуск программного обеспечения на микроконтроллере"

[.text-right]
Работу принял, доцент +
______/ С.В. Колодий / +
______2023 г.

[.text-right]
Автор работы +
студент группы КЭ-413 +
______/ А.И. Давлетбаев / +
______2023 г.

[.text-center]
Челябинск 2023

== Оглавление

. Задание 1;
. Задание 2;
. Задание 3.

== Задание 1

Создав проект на С++ с шаблоном main.cpp. Подключаем к проекту файл cstartup.cpp. В этом файле описывается таблица вектров прерываний и начальная инициализация. 

Далее создадим папки AbstractHardware/Registers/Filed Values, Common, Application, FreeRtos. 
В папке AbstractHardware/Registers будут находится файлы с описанием полей регистров.
В папке AbsstractHardware будут содержаться файлы для работы с регистрами, аппаратурой и периферией.
В папке Application в дальнейшем будут содержаться файлы классов для работы с логикой программы.
Папка FreeRtos пригодиться при работе с ОСРВ.

.Содержимое папки проекта
image::picture\Содержимое папки проекта.jpg[]

Размер стека (Stack) установили в 0x1000 и кучи (Heap) можно установить в 0, так как динамическая память не будет использоваться.

.Установленные стека и кучи
image::picture\Установка стека и кучи.jpg[]

Скопировали содержимое папки Registers и Common с проекта преподавателя в свою папку.

.main.cpp
[source, cpp]
----
#include "rccregisters.hpp" // for RCC
#include "gpioaregisters.hpp" // for GPIOA
#include "gpiocregisters.hpp" // for GPIOÑ

std::uint32_t SystemCoreClock = 16'000'000U;

extern "C" 
{
int __low_level_init(void)
{
  
}
}

void delay(int cycles)
{
  for(int i = 0; i < cycles; ++i)    
  {   
    asm volatile("");
  }    
}

int main()
{  
  //Подать тактирование на порт A
  RCC::AHB1ENR::GPIOAEN::Enable::Set() ;
  //Подать тактирование на порт C
  RCC::AHB1ENR::GPIOCEN::Enable::Set() ;
  //порта а.5 на вывод
  GPIOA::MODER::MODER5::Output::Set() ;
  //порта C.5,C.8, C.9 на вывод
  GPIOC::MODER::MODER5::Output::Set() ;
  GPIOC::MODER::MODER8::Output::Set() ;
  GPIOC::MODER::MODER9::Output::Set() ;
  
  for(;;)
  {
   
     GPIOA::ODR::ODR5::High::Set();
     GPIOC::ODR::ODR5::High::Set();
     delay(1000000); 
     GPIOA::ODR::ODR5::Low::Set();
     GPIOC::ODR::ODR5::Low::Set();
     delay(1000000); 
  }
  
  return 1;
}

----

== Задание 2

Откомпилировали и отлинковали программу.

.Компиляция и линковка
image::
